---
layout: post
title: 'Javascript - 실행 컨텍스트'
date: 2022-03-23
tags: [JavaScript]
categories:
  - Javascript
comments: true
---

## 실행 컨텍스트

<strong>실행 컨텍스트란? 자바스크립트 코드가 실행되는 환경을 제공하는 객체이다.</strong>

실행 컨텍스트는 코드가 실행되었을 때 자바스크립트 엔진 내부의 콜스택에서 전역컨텍스트를 시작으로 함수가 실행되는 기준으로 실행 컨텍스트가 생성되고, 제일 내부에서 실행된 함수가 콜스택에서 제일 먼저 바라보게 된다.

실행 컨텍스트에서 코드가 실행되는 조건이나 속성 등은 매우 많지만, 그 중 가장 대표적인 기능은 record, outer가 있다.

record의 경우, 자바스크립트 엔진에서 코드가 실행될 때,

### 변수 & 함수 호이스팅

자바스크립트 엔진에서 코드가 실행되기전에, 한번 코드를 주욱 읽어서 변수나 함수를 먼저 생성하는 단계를 걸치게 된다.

그 생성단계를 거치면서 변수, 함수 선언을 먼저 진행하게 된다.

그리고 나서 코드 실행이 시작되면 생성단계에서 이미 선언된 변수, 함수가 실행단계의 코드상에서 선언, 할당이 이루어지기 전에 참조가 된다면

var로 선언, 할당한 변수의 경우 undefined라는 결과를 받게 되고, 함수의 경우 선언 전에도 실행을 할 수 있게 된다.

이와 같은 경우를 마치 변수함수가 코드 맨위로 끌어올려진다고 해서 호이스팅이라고 한다.

#### let, const

let, const의 경우, var의 단점을 커버하려는 목적으로 ES5 이후에 생성된 예약어인데,

let, const는 블록스코프로 동작이 실행되어 자바스크립트 엔진에서 코드를 주욱 읽었을 때 변수 호이스팅 단계가 이루어지지 않는다.

그래서 let, const로 변수 선언, 할당을 했을 때 해당 변수를 그 전에 참조하게되면, 아직 생성되지않은 상태에서 접근한 것이 되므로 Reference 에러가 난다.

그리고 할당전까지 그 에러가 나는 구역을 TDZ라고 한다.

#### var에 함수를 할당했을 때

var로 함수를 할당할 수 있다. 그렇다면 위에서 설명했듯이 생성단계를 걸치면서 var로 선언된 변수가 undefined로 먼저 초기화가 된다.

그리고 함수를 할당하는 구간까지는 undefined, 이후에 함수를 실행할 수 있게 되는데, 이렇게 변수에 함수를 할당해놓는 것을 함수 표현식이라고 한다.

그리고 함수를 변수로 담을 필요없이 바로 선언할 수도 있는데, 이를 함수 선언문이라고 한다. 함수를 바로 선언하게 되면 생성단계에서 함수 호이스팅으로 인해 함수가 처음부터 모든 내용이 입력된다.

그래서 함수를 아래에 선언했는데도 해당 코드 위에서도 함수를 실행할 수 있게 된다.

### 스코프
