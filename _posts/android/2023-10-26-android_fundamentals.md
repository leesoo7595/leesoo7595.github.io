---
layout: post
title: "[Android] 애플리케이션 기본 항목"
date: 2023-10-26
tags: [Android]
comments: true
---

Android SDK는 모든 데이터 및 리소스 파일과 함께 코드를 컴파일하여 하나의 APK를 만든다. 안드로이드 패키지는 `.apk`인 아카이브 파일이다. 이 안에는 안드로이드 앱의 모든 콘텐츠가 들어있고, Android로 구동하는 기기가 앱을 설치할 때 이 파일을 사용한다.

각 안드로이드 앱은 다음과 같은 자체적인 보안기능으로 보호된다.

- 안드로이드 운영체제는 멀티유저 리눅스 시스템으로, 각 앱은 다른 각각의 사용자와 같다.
- 시스템은 각 앱에 고유한 리눅스 id를 할당하고 그 id만 앱에 엑세스하도록 한다. 앱에서는 이 리눅스 id를 인식하지 못한다. 시스템은 앱안의 모든 파일에 대해 권한을 설정하여 해당 앱에 할당된 id만 엑세스할 수 있도록 한다.
- 각 프로세스는 vm이 있고, 그래서 한 앱의 코드가 다른 앱과는 격리된 상태로 실행된다.
- 모든 앱은 앱 자체의 리눅스 프로세스에서 실행된다. 안드로이드 시스템은 앱의 구성요소중 어느것이 실행되도 프로세스를 새로 시작하고, 더 이상 필요없는 경우 해당 프로세스를 종료한다.

안드로이드 시스템은 이런 방식으로 **최소 권한의 원리**를 구현한다. 각 앱은 기본적으로 필요한 구성요소에만 엑세스 권한을 가지고 그 이상은 허용되지 않는다. 그럼으로써 각 앱은 완전히 격리된다.

그러나 앱이 다른 앱과 데이터를 공유하고 시스템 서비스에 엑세스하는 방식 또한 여러가지가 있다.

- 두 개의 앱이 같은 리눅스 id를 공유하도록 설정할 수 있다. 그렇게하면 두 앱은 서로 파일에 엑세스할 수 있게 된다. 더해서 같은 리눅스 프로세스에서 실행되고, vm을 공유하도록 설정할 수도 있다. 이러한 앱은 같은 인증서로 서명하여야한다.
- 앱은 여러가지 기기 데이터에 액세스할 권한을 요청할 수 있다. 사용자는 권한을 명시적으로 부여해야한다.

## 앱 구성요소

안드로이드 앱의 필수적인 기본 구성요소는 시스템이나 사용자가 앱에 들어올 수 있는 진입점이다.

- Activity
- Service
- Broadcast Receiver
- Contents Provider

### Activity

액티비티는 사용자와 상호작용하기 위한 entry이다. 액티비티는 사용자 인터페이스를 포함한 화면 하나를 나타낸다. 여러 액티비티가 함께 작동하여 환경 구성을 할 수 있지만, 각자 독립되어 있다. 이걸 활용하여 앱에서 허용하는 경우 다른 앱이 이 앱의 액티비티 중 하나를 시작할 수 있다. 즉, 액티비티는 다음과 같이 시스템과 앱의 주요 상호작용을 돕는다.

- 사용자가 화면에 표시된 것을 추적해서 액티비티를 호스팅하는 프로세스를 시스템에서 계속 실행하도록 한다.
- 이전에 사용한 프로세스에 사용자가 다시 찾을만한 액티비티가 있다는 것을 인지하고, 해당 프로세스를 유지하는데 더 높은 우선순위를 부여한다.
- 앱이 프로세스를 종료하게되는 경우 이전 상태가 복원되는 동시에 사용자가 액티비티로 돌아갈 수 있게한다.
- 앱이 사용자 플로우를 구현하고 시스템이 이러한 플로우를 조정하기 위한 수단을 제공한다.

하나의 액티비티는 Activity 클래스의 하위 클래스로 구현한다.

### Service

서비스는 여러이유로 백그라운드에서 앱을 계속 실행하기 위한 다목적 entry이다. 서비스는 백그라운드에서 실행되는 구성요소로 오랫동안 실행되는 작업을 수행하거나, 원격 프로세스를 위한 작업을 수행한다. 사용자 인터페이스는 제공하지 않는다.

예를 들면 사용자가 다른 앱에 있는 동안 백그라운드에서 음악을 재생하거나, 사용자와 액티비티 간의 상호작용을 차단하지 않고 네트워크를 통해 데이터를 가져올 수도 있다. 다른 구성요소(액티비티 같은)가 서비스를 시작한 다음 실행되도록 두거나 자신에게 바인딩하여 상호작용할 수 있도록 한다.

서비스는 작업이 완료될 때까지 해당 서비스를 계속 실행하도록 지시할 수 있다.

## [안드로이드 - 애플리케이션 기본 항목](https://developer.android.com/guide/components/fundamentals?hl=ko#Components)
