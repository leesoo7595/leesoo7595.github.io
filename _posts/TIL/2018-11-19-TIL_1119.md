---
layout: post
title: "TIL: Process VS Thread"
date: 2018-11-19
tags: [TIL]
comments: true
---

# Process와 Thread

## Process

프로세스란, 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램이다.

프로세스는 하드 디스크에 설치 되어 있는 프로그램을 메모리상에 실행중인 작업을 말한다.

이러한 `프로세스`를 동시에 여러 개 실행하는 것을 `멀티태스킹`이라 하고, 어떤 작업을 하나 이상의 `프로세스`에서 **병렬**로 처리하는 것을 `멀티프로세싱`이라한다.

### Process 특징 및 멀티프로세싱의 단점

프로세스는 프로그램 실행시 `Code, Data, Stack, Heap`의 구조로 되어있는 독립된 메모리 영역을 할당 받는다.

이러한 특징은 멀티프로세싱 방식에서 단점을 가지게 된다.

멀티 프로세싱은 CPU에서 여러 프로세스를 로테이션으로 돌면서 처리를 하게 된다. (스케쥴링 알고리즘)

동작중인 프로세스가 대기를 타면서 해당 프로세스의 상태를 보관하고, 대기하고 있던 다음 순번의 프로세스가 동작하면서 이전에 보관했던 프로세스의 상태를 복구하게 된다.

이러한 과정을 `Context Switching`이라고 하는데, 프로세스는 **독립된 메모리 영역**이다보니 캐쉬 메모리 초기화 등의 무거운 작업이 진행되고 **오버헤드**가 발생하게 된다.


## Thread

쓰레드란, 프로세스 내에서 실행되는 여러 흐름의 단위이다.

쓰레드는 프로세스에서 동작하는 여러 실행의 흐름이다. 기본적으로 프로세스당 최소 1개의 스레드를 가지고 있고, 그것을 `메인 스레드`라고 한다.

프로세스는 1개 이상의 스레드를 가질 수 있으며, 이를 멀티 스레드라고 한다.

위에서 설명한 `Context Switching`은 프로세스가 가지고 있는 스레드를 처리하는 과정이다.

### Thread의 특징 및 멀티스레딩의 장단점

스레드는 프로세스 내에서 각각 `Stack`만 따로 할당을 받고, `Code, Data, Heap` 영역을 공유한다.

이러한 특징의 장점은

1. 메모리를 공유하니 독립적인 프로세스와는 달리 스레드간 데이터를 주고 받는게 간단해진다.
2. 시스템 자원 소모가 줄어든다. 응답시간 또한 단축된다.
3. `Context Switching`의 오버헤드에 대한 부분 해결
4. 프로세스와는 달리 `Code, Data, Heap` 영역을 공유하여 `Stack`영역만 처리를 하면 된다. 그 결과 처리 비용이 감소한다.
5. 프로세스 `Context Switching`의 경우 캐시 메모리를 초기화해야 하지만, 스레드는 메모리를 공유하므로 그만큼 큰 처리 비용이 드는 초기화를 할 필요가 없다.

단점은

1. 여러 스레드가 동시에 작업을 하다보면 공유된 데이터를 서로 사용하다가 충돌이 일어날 가능성이 크다.
2. 개발시 디버깅이 까다로워지고 버그가 생기기 쉽다.

**프로세스는 운영체제로부터 자원을 할당받는 작업의 단위이고, 스레드는 프로세스가 할당받은 자원을 이욜하는 실행의 단위이다.**
